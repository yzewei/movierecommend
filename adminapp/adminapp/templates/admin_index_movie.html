{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>后台管理</title>
    <link rel="stylesheet" href="{% static 'plugins/bootstrap-3.4.1/css/bootstrap.min.css' %}">
    <link rel="shortcut  icon" href="../static/img/icon.jpg" type="image/x-icon" />
    <style>
        .navbar{
            border-radius: 0;
        }
    </style>
</head>
<body>
{#表头#}
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>  <b>电影网站后台管理系统</b> &nbsp;&nbsp;</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li ><a href="/manager/index">用户管理 </a></li>
                <li class="active"><a href="/manager/index_movie">电影管理<span class="sr-only">(current)</span></a></li>
                <li><a href="/manager/index_admin">管理员管理</a></li>
                <li><a href="/manager/user_show"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span>  用户数据可视化</a></li>

            </ul>

            <ul class="nav navbar-nav navbar-right">
                <li><a href="/manager/logout">注销</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                        {{request.session.admin}}
                    </a>

                </li>
            </ul>
        </div>
    </div>
</nav>







{#表格#}
<div>
    <div class="container">


        {#   上传下载文件面板#}
        <div class="panel panel-default">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-sort" aria-hidden="true"></span> &nbsp; 导入/导出 Excel电影数据
            </div>
            <div class="panel-body" >
                <form method="post" enctype="multipart/form-data" action="/manager/movie_multi/">
                    {%  csrf_token %}
                    <div style="float: left"> <input type="file" name="execl"></div>
                    <div style="float: left">
                        <span class="glyphicon glyphicon-cloud-upload" aria-hidden="true"></span>&nbsp;

                        <input type="submit" value="上传" class="btn btn-default"></div>
                </form>
                <div style=" margin-left:15px;float: left">
                    <span class="glyphicon glyphicon-cloud-download" aria-hidden="true"></span>&nbsp;
                    <a class="btn btn-default" href="/manager/movie_export/">下载</a></div>
            </div>
        </div>













        <div style="margin-bottom: 12px">
            <a class="btn btn-primary" href="/manager/movie_add/">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                添加数据
            </a>
            {#            搜索框#}
            <div style="float: right;width: 300px" >
                <form method="get">
                    <div class="input-group">

                        <input type="text" name="q" class="form-control" placeholder="搜一下电影名称" value="{{ search_data }}">
                        <span class="input-group-btn">
                                <button class="btn btn-default" type="submit">
                                    <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                                </button>
                        </span>
                    </div><!-- /input-group -->
                </form>
            </div>




        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-expand" aria-hidden="true"></span>
                电影数据
            </div>

            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>电影名称</th>
                    <th>电影ID</th>
                    <th>导演</th>
                    <th>电影评分</th>
                    <th>上映日期</th>
                    <th>电影时长</th>
                    <th>语言</th>
                    <th>地区</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                {% for obj in queryset %}
                    <tr>
                        <th >{{ obj.name }}</th>
                        <td>{{ obj.dataid }}</td>
                        <td>{{ obj.directors }}</td>

                        <td>{{ obj.rate }}</td>
                        <td>{{ obj.date }}</td>
                        <td>{{ obj.duration }}</td>
                        <td>{{ obj.language }}</td>
                        <td>{{ obj.country }}</td>
                        <td>
                            <a class="btn btn-primary" href="/manager/{{ obj.dataid }}/movie_edit/"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> 编辑</a>
                            <a class="btn btn-danger" href="/manager/movie_del/?dataid={{ obj.dataid }}"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> 删除</a>
                        </td>
                    </tr>
                {% endfor %}


                </tbody>
            </table>
        </div>
        <nav aria-label="...">
            {#      <ul class="pagination">#}
            {#          {{ page_list }}#}
            {#        </ul>#}


            <ul class="pagination">
                {{ page_string }}
            </ul>
        </nav>

    </div>

</div>









<script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>
<script src="{% static 'plugins/bootstrap-3.4.1/js/bootstrap.min.js' %}"></script>



</body>
</html>