{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>后台管理</title>
    <link rel="stylesheet" href="{% static 'plugins/bootstrap-3.4.1/css/bootstrap.min.css' %}">
    <link rel="shortcut  icon" href="../static/img/icon.jpg" type="image/x-icon" />
    <style>
        .navbar{
            border-radius: 0;
        }
    </style>
</head>
<body>
{#表头#}
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>  <b>电影网站后台管理系统</b> &nbsp;&nbsp;</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="active"><a href="/manager/index">用户管理 <span class="sr-only">(current)</span></a></li>
                <li><a href="/manager/index_movie">电影管理</a></li>
                <li><a href="/manager/index_admin">管理员管理</a></li>
                <li><a href="/manager/user_show"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span>  用户数据可视化</a></li>

            </ul>

            <ul class="nav navbar-nav navbar-right">
                <li><a href="/manager/logout">注销</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                        {{request.session.admin}}
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

{#表格#}
<div>
    <div class="container">
        <div style="margin-bottom: 12px" class="clearfix">

            {#   上传下载文件面板#}
            <div class="panel panel-default">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-sort" aria-hidden="true"></span> &nbsp; 导入/导出 Excel用户数据
                </div>
                <div class="panel-body" >
                    <form method="post" enctype="multipart/form-data" action="/manager/user_multi/">
                        {%  csrf_token %}
                        <div style="float: left"> <input type="file" name="execl"></div>
                        <div style="float: left">
                            <span class="glyphicon glyphicon-cloud-upload" aria-hidden="true"></span>&nbsp;

                            <input type="submit" value="上传" class="btn btn-default"></div>
                    </form>
                    <div style=" margin-left:15px;float: left">
                        <span class="glyphicon glyphicon-cloud-download" aria-hidden="true"></span>&nbsp;
                        <a class="btn btn-default" href="/manager/user_export/">下载</a></div>
                </div>
            </div>





            <a class="btn btn-primary" href="/manager/user_add/">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                添加数据
            </a>





            {#            搜索框#}
            <div style="float: right;width: 300px" >
                <form method="get">
                    <div class="input-group">

                        <input type="text" name="q" class="form-control" placeholder="搜一下用户名称" value="{{ search_data }}">
                        <span class="input-group-btn">
                                <button class="btn btn-default" type="submit">
                                    <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                                </button>
                        </span>
                    </div><!-- /input-group -->
                </form>
            </div>


        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                用户数据
            </div>

            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>用户名称</th>
                    <th>用户密码</th>
                    <th>用户标签</th>
                    <th>用户偏好</th>
                    <th>用户创建时间</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                {% for obj in queryset %}
                    <tr>
                        <th >{{ obj.uid }}</th>
                        <td ><input type="password" value="{{ obj.password }}"  style="border:0px" id="version"></td>
                        <td>{{ obj.tag }}</td>
                        <td>{{ obj.likes }}</td>
                        <td>{{ obj.createdate }}</td>

                        <td>
                            <a class="btn btn-primary" href="/manager/{{ obj.uid }}/user_edit/"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> 编辑</a>
                            <a class="btn btn-danger" href="/manager/user_del/?uid={{ obj.uid }}"> <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>  删除</a>
                        </td>
                    </tr>
                {% endfor %}
                {#     <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>                #}
                {#     <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>                 #}

                </tbody>
            </table>
        </div>
        <nav aria-label="...">
            <ul class="pagination">
                {{ page_string }}
            </ul>
        </nav>

    </div>
</div>









<script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>
<script src="{% static 'plugins/bootstrap-3.4.1/js/bootstrap.min.js' %}"></script>



</body>
</html>